<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Sprawdzenie NIP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
    <h1 class="mb-4">ðŸ“‹ Sprawdzenie statusu VAT (NIP)</h1>

    {% if blad %}
        <div class="alert alert-danger">{{ blad }}</div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data" id="upload-form">
        <div class="mb-4">
             <label for="nip" class="form-label">Lub wpisz pojedynczy NIP:</label>
             <input type="text" name="nip" id="nip" class="form-control" placeholder="np. 123-456-32-18" maxlength="14">
             <div class="form-text">WprowadÅº 10 cyfr, myÅ›lniki i spacje zostanÄ… automatycznie usuniÄ™te.</div>
        </div>


        <div class="mb-4">
         <label for="plik" class="form-label">Lub zaÅ‚aduj plik Excel (.xlsx):</label>
         <input type="file" name="plik" id="plik" accept=".xlsx" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary" id="submit-btn">
          <span id="submit-text">SprawdÅº</span>
         <span class="spinner-border spinner-border-sm d-none" role="status" id="spinner" aria-hidden="true"></span>
        </button>
    </form>

</div>

<script>
document.getElementById('upload-form').addEventListener('submit', function () {
    document.getElementById('submit-btn').disabled = true;
    document.getElementById('submit-text').textContent = 'Trwa sprawdzanie...';
    document.getElementById('spinner').classList.remove('d-none');
});
</script>

<script>
document.getElementById("nip").addEventListener("input", function () {
    // UsuÅ„ wszystkie znaki niebÄ™dÄ…ce cyframi i ogranicz do 10 znakÃ³w
    this.value = this.value.replace(/\D/g, "").slice(0, 10);
});
</script>

</body>
</html>
